webpackJsonp([6],{"19aW":function(e,t){},"2jQA":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=n("sK3K"),o=n("msXN"),r=n("gyMJ"),i={name:"login-in",mixins:[o.a],components:{LoginLogo:s.a},data:function(){return{loginForm:{username:"",password:""},rules:{username:[{validator:function(e,t,n){if(!t)return n(new Error("用户名不能为空"));n()},message:"请输入用户名",trigger:"blur"}],password:[{validator:function(e,t,n){""===t?n(new Error("请输入密码")):n()},message:"请输入密码",trigger:"blur"}]}}},mounted:function(){this.changeIndex("登录")},methods:{changeIndex:function(e){this.$store.commit("setActiveName",e)},handleleLoginIn:function(){var e=this,t=new URLSearchParams;t.append("username",this.loginForm.username),t.append("password",this.loginForm.password),Object(r.p)(t).then(function(t){1===t.code?(e.$message({message:"登录成功",type:"success"}),e.setUserMsg(t.userMsg[0]),e.$store.commit("setLoginIn",!0),setTimeout(function(){e.changeIndex("首页"),e.$router.push({path:"/"}),e.$router.go(0)},2e3)):e.notify("用户名或密码错误","error")}).catch(function(e){})},setUserMsg:function(e){this.$store.commit("setUserId",e.id),this.$store.commit("setUsername",e.username),this.$store.commit("setAvator",e.avator)},goSignUp:function(){this.$router.push({path:"/sign-up"})}}},a={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"login-in"},[n("login-logo"),e._v(" "),n("div",{staticClass:"login"},[e._m(0),e._v(" "),n("el-form",{ref:"loginForm",staticClass:"demo-ruleForm",attrs:{model:e.loginForm,"status-icon":"",rules:e.rules}},[n("el-form-item",{attrs:{prop:"username"}},[n("el-input",{attrs:{placeholder:"用户名"},model:{value:e.loginForm.username,callback:function(t){e.$set(e.loginForm,"username",t)},expression:"loginForm.username"}})],1),e._v(" "),n("el-form-item",{attrs:{prop:"password"}},[n("el-input",{attrs:{type:"password",placeholder:"密码"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.loginIn(t)}},model:{value:e.loginForm.password,callback:function(t){e.$set(e.loginForm,"password",t)},expression:"loginForm.password"}})],1),e._v(" "),n("div",{staticClass:"login-btn"},[n("el-button",{on:{click:e.goSignUp}},[e._v("注册")]),e._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:e.handleleLoginIn}},[e._v("登录")])],1)],1)],1)],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"login-head"},[t("span",[this._v("帐号登录")])])}]};var l=n("VU/8")(i,a,!1,function(e){n("19aW")},"data-v-48cf7364",null);t.default=l.exports},XAcg:function(e,t){},sK3K:function(e,t,n){"use strict";var s={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"login-logo"},[t("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[t("use",{attrs:{"xlink:href":"#icon-erji"}})])])},staticRenderFns:[]};var o=n("VU/8")({name:"login-logo"},s,!1,function(e){n("XAcg")},"data-v-109048f2",null);t.a=o.exports}});